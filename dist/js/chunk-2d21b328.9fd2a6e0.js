(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b328"],{bf6d:function(t,e,c){"use strict";c.r(e);var l=c("7a23"),a={class:"page-article py-6 px-6 px-md-12"},r={class:"d-flex justify-content-between mb-3"},i=Object(l["h"])("h2",{class:"fs-3"},"文章列表",-1),s={class:"d-flex align-items-center"},n={class:"input-group border-3"},o=Object(l["h"])("button",{class:"btn btn-secondary",type:"button"},[Object(l["h"])("i",{class:"fas fa-search"})],-1),b={class:"table bg-light"},d=Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[Object(l["h"])("th",{scope:"col",width:"150"},"文章分類"),Object(l["h"])("th",{scope:"col"},"文章標題"),Object(l["h"])("th",{scope:"col",width:"150"},"是否啟用"),Object(l["h"])("th",{scope:"col",width:"150"},"編輯")])],-1),u={scope:"row",class:"text-primary"},m={key:0,class:"text-success"},p={key:1,class:"text-danger"},h={width:"250"},j={class:"input-group mb-3"},O=["onClick"],f=["onClick"];function A(t,e,c,A,v,y){var g=Object(l["J"])("ArticleModal");return Object(l["B"])(),Object(l["g"])("div",a,[Object(l["h"])("div",r,[i,Object(l["h"])("div",s,[Object(l["h"])("div",n,[Object(l["W"])(Object(l["h"])("input",{type:"text",class:"form-control",placeholder:"搜尋文章","onUpdate:modelValue":e[0]||(e[0]=function(t){return v.searchText=t})},null,512),[[l["R"],v.searchText,void 0,{trim:!0}]]),o]),Object(l["h"])("button",{class:"btn btn-primary py-2 flex-shrink-0 ms-3",type:"button",onClick:e[1]||(e[1]=function(t){return y.openModal(!0)})}," 新增文章 ")])]),Object(l["h"])("table",b,[d,Object(l["h"])("tbody",null,[(Object(l["B"])(!0),Object(l["g"])(l["a"],null,Object(l["H"])(t.articles,(function(t){return Object(l["B"])(),Object(l["g"])("tr",{key:t.id},[Object(l["h"])("th",u,Object(l["M"])(t.category),1),Object(l["h"])("td",null,Object(l["M"])(t.title),1),Object(l["h"])("td",null,[t.isPublic?(Object(l["B"])(),Object(l["g"])("span",m," 啟用 ")):(Object(l["B"])(),Object(l["g"])("span",p," 未啟用 "))]),Object(l["h"])("td",h,[Object(l["h"])("div",j,[Object(l["h"])("button",{class:"btn btn-sm btn-primary",type:"button",onClick:function(e){return y.openModal(!1,t.id)}}," 編輯 ",8,O),Object(l["h"])("button",{class:"btn btn-sm btn-secondary",type:"button",onClick:function(e){return y.removeArticle(t)}}," 刪除 ",8,f)])])])})),128))])]),Object(l["k"])(g,{ref:"articleModal",article:v.tempArticle,onUpdateArticle:y.sendArticle},null,8,["article","onUpdateArticle"])])}var v=c("1da1"),y=c("5530"),g=(c("96cf"),c("d3b7"),c("5502")),w=(c("a4d3"),c("e01a"),{ref:"modal",class:"modal fade",tabindex:"-1"}),x={class:"modal-dialog modal-xl"},k={class:"modal-content"},$=Object(l["h"])("div",{class:"modal-header bg-secondary"},[Object(l["h"])("h3",{class:"modal-title text-primary"}," 建立文章 "),Object(l["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1),_={class:"modal-body"},C={class:"container"},U={class:"row"},N={class:"col-lg-4"},M=Object(l["h"])("label",{for:"main-image",class:"form-label"}," 輸入主要圖片網址 ",-1),R=Object(l["h"])("input",{type:"text",id:"main-image",class:"d-block form-control mb-3"},null,-1),V=Object(l["h"])("label",{for:"main-image",class:"form-label"}," 或上傳圖片 ",-1),G=["src"],W={class:"col-lg-8"},B=Object(l["h"])("label",{for:"title",class:"form-label"},[Object(l["j"])(" 標題 "),Object(l["h"])("span",{class:"text-primary"},"*")],-1),D=Object(l["h"])("label",{for:"subTitle",class:"form-label"},[Object(l["j"])(" 副標題 "),Object(l["h"])("span",{class:"text-primary"},"*")],-1),I={class:"row"},P={class:"col-lg-6"},T=Object(l["h"])("label",{for:"category",class:"form-label"},[Object(l["j"])(" 分類 "),Object(l["h"])("span",{class:"text-primary"},"*")],-1),H={class:"col-lg-6"},E=Object(l["h"])("label",{for:"author",class:"form-label"},[Object(l["j"])(" 作者 "),Object(l["h"])("span",{class:"text-primary"},"*")],-1),F={class:"col-lg-6"},L=Object(l["h"])("label",{for:"create_at",class:"form-label"},[Object(l["j"])(" 日期 "),Object(l["h"])("span",{class:"text-primary"},"*")],-1),J={class:"col-lg-6 mt-6"},q={class:"form-check"},z=Object(l["h"])("label",{class:"form-check-label",for:"isPublic"}," 是否啟用 ",-1),K={class:"mb-3"},Q=Object(l["h"])("label",{for:"description",class:"form-label"}," 文章介紹 ",-1),S={class:"mb-3"},X=Object(l["h"])("label",{for:"content",class:"form-label"},[Object(l["j"])(" 文章內容 "),Object(l["h"])("span",{class:"text-primary"},"*")],-1),Y={class:"modal-footer"},Z=Object(l["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ",-1);function tt(t,e,c,a,r,i){return Object(l["B"])(),Object(l["g"])("div",w,[Object(l["h"])("div",x,[Object(l["h"])("div",k,[$,Object(l["h"])("div",_,[Object(l["h"])("div",C,[Object(l["h"])("div",U,[Object(l["h"])("div",N,[M,R,V,Object(l["h"])("input",{type:"file",class:"form-control mb-3",id:"inputGroupFile02",ref:"fileInput",onChange:e[0]||(e[0]=function(){return i.uploadFile&&i.uploadFile.apply(i,arguments)})},null,544),Object(l["h"])("img",{class:"img-fluid",src:r.tempArticle.image},null,8,G)]),Object(l["h"])("div",W,[B,Object(l["W"])(Object(l["h"])("input",{type:"text",id:"title",class:"d-block form-control mb-3","onUpdate:modelValue":e[1]||(e[1]=function(t){return r.tempArticle.title=t})},null,512),[[l["R"],r.tempArticle.title,void 0,{trim:!0}]]),D,Object(l["W"])(Object(l["h"])("input",{type:"text",id:"subTitle",class:"d-block form-control mb-3","onUpdate:modelValue":e[2]||(e[2]=function(t){return r.tempArticle.subTitle=t})},null,512),[[l["R"],r.tempArticle.subTitle,void 0,{trim:!0}]]),Object(l["h"])("div",I,[Object(l["h"])("div",P,[T,Object(l["W"])(Object(l["h"])("input",{type:"text",id:"category",class:"d-block form-control mb-3","onUpdate:modelValue":e[3]||(e[3]=function(t){return r.tempArticle.category=t})},null,512),[[l["R"],r.tempArticle.category,void 0,{trim:!0}]])]),Object(l["h"])("div",H,[E,Object(l["W"])(Object(l["h"])("input",{type:"text",id:"author",class:"d-block form-control mb-3","onUpdate:modelValue":e[4]||(e[4]=function(t){return r.tempArticle.author=t})},null,512),[[l["R"],r.tempArticle.author,void 0,{trim:!0}]])]),Object(l["h"])("div",F,[L,Object(l["h"])("input",{type:"date",id:"create_at",class:"d-block form-control mb-3",onChange:e[5]||(e[5]=function(){return i.setDate&&i.setDate.apply(i,arguments)})},null,32)]),Object(l["h"])("div",J,[Object(l["h"])("div",q,[Object(l["W"])(Object(l["h"])("input",{class:"form-check-input",id:"isPublic",type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=function(t){return r.tempArticle.isPublic=t})},null,512),[[l["P"],r.tempArticle.isPublic]]),z])])]),Object(l["h"])("div",K,[Q,Object(l["W"])(Object(l["h"])("textarea",{class:"form-control",id:"description","onUpdate:modelValue":e[7]||(e[7]=function(t){return r.tempArticle.description=t}),rows:"6"},"\n                  ",512),[[l["R"],r.tempArticle.description,void 0,{trim:!0}]])]),Object(l["h"])("div",S,[X,Object(l["W"])(Object(l["h"])("textarea",{class:"form-control",id:"content","onUpdate:modelValue":e[8]||(e[8]=function(t){return r.tempArticle.content=t}),rows:"6"},"\n                  ",512),[[l["R"],r.tempArticle.content,void 0,{trim:!0}]])])])])])]),Object(l["h"])("div",Y,[Z,Object(l["h"])("div",{class:Object(l["s"])({"cursor-not-allowed":i.isValid})},[Object(l["h"])("button",{type:"button",class:Object(l["s"])(["btn btn-primary",{disabled:i.isValid}]),onClick:e[9]||(e[9]=function(){return i.comfirmUpdate&&i.comfirmUpdate.apply(i,arguments)})}," 確認 ",2)],2)])])])],512)}var et=c("519a"),ct=c("0e23"),lt={mixins:[ct["a"],et["a"]],emits:["updateArticle"],props:{article:{type:Object,default:function(){return{}}},isNew:{type:Boolean,default:!1}},data:function(){return{tempArticle:{}}},computed:{isValid:function(){var t;return this.tempArticle.title&&this.tempArticle.category&&this.tempArticle.create_at&&this.tempArticle.author&&this.tempArticle.isPublic&&this.tempArticle.content||(t=!0),t}},watch:{article:{immediate:!0,handler:function(){this.tempArticle=this.article}}},methods:{setDate:function(t){var e=t.target.value,c=this.$_timestamp(e);this.tempArticle.create_at=c},uploadFile:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){var c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("CHANGE_LOADING",!0),c=t.$refs.fileInput.files[0],e.prev=2,e.next=5,t.$_uploadImage(c);case 5:l=e.sent,l.data.success?(t.$_swal("圖片上傳成功"),t.tempArticle.image=l.data.imageUrl):t.$_swal(l.data.message,"error"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),t.$_swal(e.t0,"error");case 12:return e.prev=12,t.$store.commit("CHANGE_LOADING",!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})))()},comfirmUpdate:function(){this.$emit("updateArticle",this.tempArticle)}}},at=c("6b0d"),rt=c.n(at);const it=rt()(lt,[["render",tt]]);var st=it,nt={components:{ArticleModal:st},data:function(){return{modal:{},article:{},tempArticle:{},isNew:!1,searchText:""}},computed:Object(y["a"])({},Object(g["e"])("adminArticles",["articles"])),methods:Object(y["a"])(Object(y["a"])({},Object(g["b"])("adminArticles",["getArticle","getArticles","updateArticle","deleteArticle"])),{},{openModal:function(t,e){var c=this;t?this.tempArticle={}:(this.$store.commit("CHANGE_LOADING",!0),this.getArticle({id:e}).then((function(t){t.data.success?c.tempArticle=Object(y["a"])({},t.data.article):c.$_swal(t.data.message,"error")})).catch((function(t){c.$_swal(t,"error")})).finally((function(){c.$store.commit("CHANGE_LOADING",!1)}))),this.isNew=t,this.$refs.articleModal.showModal()},sendArticle:function(t){var e=this;this.updateArticle({tempArticle:t,isNew:this.isNew}).then((function(){e.$refs.articleModal.hideModal()}))},removeArticle:function(t){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function c(){var l;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.next=2,e.$_swalComfirm("確定刪除 ".concat(t.title," ?"));case 2:l=c.sent;try{l.isConfirmed&&e.deleteArticle({id:t.id})}catch(a){e.$_swal(a,"error")}case 4:case"end":return c.stop()}}),c)})))()}}),created:function(){this.getArticles()}};const ot=rt()(nt,[["render",A]]);e["default"]=ot}}]);
//# sourceMappingURL=chunk-2d21b328.9fd2a6e0.js.map