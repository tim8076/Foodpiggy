(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1269df05"],{d1e3:function(e,t,r){"use strict";r.r(t);r("b0c0");var c=r("7a23"),a={class:"page-orderList py-6 px-6 px-md-12"},n={class:"d-flex justify-content-between mb-3"},s=Object(c["h"])("h2",{class:"fs-3"},"訂單列表",-1),l={class:"d-flex align-items-center"},d={class:"input-group border-3"},o=Object(c["h"])("button",{class:"btn btn-secondary",type:"button"},[Object(c["h"])("i",{class:"fas fa-search"})],-1),i={class:"table bg-light"},b=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",{scope:"col",width:"150"},"訂單日期"),Object(c["h"])("th",{scope:"col"},"訂單編號"),Object(c["h"])("th",{scope:"col",width:"150"},"顧客姓名"),Object(c["h"])("th",{scope:"col",width:"150"},"訂單金額"),Object(c["h"])("th",{scope:"col",width:"150"},"是否啟用"),Object(c["h"])("th",{scope:"col",width:"150"},"編輯")])],-1),O={scope:"row",class:"text-primary"},u={key:0,class:"text-success"},p={key:1,class:"text-danger"},m={width:"250"},h={class:"input-group mb-3"},j=["onClick"],f=["onClick"];function g(e,t,r,g,v,y){var x=Object(c["J"])("BasePagination"),w=Object(c["J"])("OrderModal");return Object(c["B"])(),Object(c["g"])("div",a,[Object(c["h"])("div",n,[s,Object(c["h"])("div",l,[Object(c["h"])("div",d,[Object(c["W"])(Object(c["h"])("input",{type:"text",class:"form-control",placeholder:"搜尋訂單","onUpdate:modelValue":t[0]||(t[0]=function(e){return v.searchText=e})},null,512),[[c["R"],v.searchText,void 0,{trim:!0}]]),o]),Object(c["h"])("button",{class:"btn btn-primary py-2 flex-shrink-0 ms-3",type:"button",onClick:t[1]||(t[1]=Object(c["Y"])((function(){return y.deleteAll&&y.deleteAll.apply(y,arguments)}),["prevent"]))}," 刪除全部訂單 ")])]),Object(c["h"])("table",i,[b,Object(c["h"])("tbody",null,[(Object(c["B"])(!0),Object(c["g"])(c["a"],null,Object(c["H"])(e.orders,(function(t){return Object(c["B"])(),Object(c["g"])("tr",{key:t.id},[Object(c["h"])("th",O,Object(c["M"])(e.$_date(t.create_at)),1),Object(c["h"])("td",null,Object(c["M"])(t.id),1),Object(c["h"])("td",null,Object(c["M"])(t.user.name),1),Object(c["h"])("td",null,Object(c["M"])(t.total),1),Object(c["h"])("td",null,[t.is_paid?(Object(c["B"])(),Object(c["g"])("span",u," 已付款 ")):(Object(c["B"])(),Object(c["g"])("span",p," 未付款 "))]),Object(c["h"])("td",m,[Object(c["h"])("div",h,[Object(c["h"])("button",{class:"btn btn-sm btn-primary",type:"button",onClick:function(e){return y.openModal(t)}}," 編輯 ",8,j),Object(c["h"])("button",{class:"btn btn-sm btn-secondary",type:"button",onClick:function(e){return y.removeOrder(t.id)}}," 刪除 ",8,f)])])])})),128))])]),Object(c["W"])(Object(c["k"])(x,{pages:e.pagination,onEmitPage:e.getOrders},null,8,["pages","onEmitPage"]),[[c["S"],!v.searchText]]),Object(c["k"])(w,{ref:"orderModal",order:v.tempOrder,onSendOrder:y.confirmOrder},null,8,["order","onSendOrder"])])}var v=r("1da1"),y=r("5530"),x=(r("96cf"),r("5502")),w={class:"modal fade",tabindex:"-1",ref:"modal"},k={class:"modal-dialog modal-lg"},M={class:"modal-content"},P={class:"modal-header bg-secondary"},_={class:"modal-title text-primary"},C=Object(c["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),B={class:"modal-body"},$={class:"container-fluid"},R=Object(c["h"])("h4",{class:"mb-3 fw-normal"},"顧客資料",-1),W={class:"row gy-2 gx-4 mb-6"},U={class:"col-md-6"},V=Object(c["h"])("label",{for:"name",class:"form-label"}," 姓名 ",-1),J={class:"col-md-6"},A=Object(c["h"])("label",{for:"name",class:"form-label"}," 電話 ",-1),S={class:"col-md-6"},T=Object(c["h"])("label",{for:"email",class:"form-label"}," 信箱 ",-1),N={class:"col-md-6"},Y=Object(c["h"])("label",{for:"address",class:"form-label"}," 地址 ",-1),H={class:"col-md-6"},q={class:"form-check form-switch"},E={class:"form-check-label",for:"is_paid"},L={class:"w-md-75 mx-auto"},Q={class:"d-flex justify-content-between align-items-center"},z=Object(c["h"])("h4",{class:"mb-3 fw-normal"},"訂單明細",-1),D={class:"border-bottom mb-2"},F={class:"d-flex justify-content-between align-items-center"},G={class:"d-flex align-items-center me-3"},I={class:"fs-5 fw-normal me-3"},K={class:"text-end text-gray-dark"},X={class:"text-end text-primary"},Z={class:"modal-footer"},ee=Object(c["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ",-1);function te(e,t,r,a,n,s){return Object(c["B"])(),Object(c["g"])("div",w,[Object(c["h"])("div",k,[Object(c["h"])("div",M,[Object(c["h"])("div",P,[Object(c["h"])("h3",_," 訂單編號: "+Object(c["M"])(n.tempOrder.id),1),C]),Object(c["h"])("div",B,[Object(c["h"])("div",$,[R,Object(c["h"])("div",W,[Object(c["h"])("div",U,[V,Object(c["W"])(Object(c["h"])("input",{type:"text",id:"name",class:"d-block form-control","onUpdate:modelValue":t[0]||(t[0]=function(e){return n.tempOrder.user.name=e})},null,512),[[c["R"],n.tempOrder.user.name,void 0,{trim:!0}]])]),Object(c["h"])("div",J,[A,Object(c["W"])(Object(c["h"])("input",{type:"tel",id:"tel",class:"d-block form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return n.tempOrder.user.tel=e})},null,512),[[c["R"],n.tempOrder.user.tel,void 0,{trim:!0}]])]),Object(c["h"])("div",S,[T,Object(c["W"])(Object(c["h"])("input",{type:"email",id:"email",class:"d-block form-control","onUpdate:modelValue":t[2]||(t[2]=function(e){return n.tempOrder.user.email=e})},null,512),[[c["R"],n.tempOrder.user.email,void 0,{trim:!0}]])]),Object(c["h"])("div",N,[Y,Object(c["W"])(Object(c["h"])("input",{type:"text",id:"address",class:"d-block form-control","onUpdate:modelValue":t[3]||(t[3]=function(e){return n.tempOrder.user.address=e})},null,512),[[c["R"],n.tempOrder.user.address,void 0,{trim:!0}]])]),Object(c["h"])("div",H,[Object(c["h"])("div",q,[Object(c["W"])(Object(c["h"])("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"is_paid","onUpdate:modelValue":t[4]||(t[4]=function(e){return n.tempOrder.is_paid=e})},null,512),[[c["P"],n.tempOrder.is_paid]]),Object(c["h"])("label",E,Object(c["M"])(n.tempOrder.is_paid?"已付款":"未付款"),1)])])]),Object(c["h"])("div",L,[Object(c["h"])("div",Q,[z,Object(c["h"])("p",null,"日期: "+Object(c["M"])(e.$_date(n.tempOrder.create_at)),1)]),Object(c["h"])("ul",D,[(Object(c["B"])(!0),Object(c["g"])(c["a"],null,Object(c["H"])(s.products,(function(e){return Object(c["B"])(),Object(c["g"])("li",{key:e.id,class:"mb-3"},[Object(c["h"])("div",F,[Object(c["h"])("div",G,[Object(c["h"])("h4",I,Object(c["M"])(e.product.title),1),Object(c["h"])("p",null," x "+Object(c["M"])(e.qty),1)]),Object(c["h"])("p",K,"$ "+Object(c["M"])(e.total),1)])])})),128))]),Object(c["h"])("p",X,"NT$ "+Object(c["M"])(n.tempOrder.total),1)])])]),Object(c["h"])("div",Z,[ee,Object(c["h"])("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=Object(c["Y"])((function(){return s.sendOrder&&s.sendOrder.apply(s,arguments)}),["prevent"]))}," 確認 ")])])])],512)}r("07ac");var re=r("519a"),ce=r("0e23"),ae={props:{order:{type:Object,default:function(){return{}}}},mixins:[ce["a"],re["a"]],data:function(){return{tempOrder:{user:{},products:{}}}},computed:{products:function(){return Object.values(this.tempOrder.products)}},watch:{order:{immediate:!0,handler:function(){this.tempOrder=this.order}}},methods:{sendOrder:function(){this.$emit("sendOrder",Object(y["a"])({},this.tempOrder))}}},ne=r("6b0d"),se=r.n(ne);const le=se()(ae,[["render",te]]);var de=le,oe=r("dd87"),ie={components:{OrderModal:de,BasePagination:oe["a"]},data:function(){return{modal:{},tempOrder:{user:{},products:{}},searchText:""}},computed:Object(y["a"])({},Object(x["e"])("adminOrderlist",["orders","pagination"])),methods:Object(y["a"])(Object(y["a"])({},Object(x["b"])("adminOrderlist",["getOrders","updateOrder","deleteOrder","deleteAllOrders"])),{},{openModal:function(e){this.tempOrder=JSON.parse(JSON.stringify(e)),this.$refs.orderModal.showModal()},confirmOrder:function(e){this.updateOrder(e),this.$refs.orderModal.hideModal()},removeOrder:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function r(){var c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$_swalComfirm("確認刪除訂單?");case 2:c=r.sent,c.isConfirmed&&t.deleteOrder({id:e});case 4:case"end":return r.stop()}}),r)})))()},deleteAll:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$_swalComfirm("確認刪除所有訂單?");case 2:r=t.sent,r.isConfirmed&&e.deleteAllOrders();case 4:case"end":return t.stop()}}),t)})))()}}),created:function(){this.getOrders()}};const be=se()(ie,[["render",g]]);t["default"]=be},dd87:function(e,t,r){"use strict";var c=r("7a23"),a={"aria-label":"Page navigation example"},n={class:"pagination justify-content-center"},s=Object(c["h"])("span",{"aria-hidden":"true"},"«",-1),l=[s],d={class:"page-item"},o=["value"],i=Object(c["h"])("span",{"aria-hidden":"true"},"»",-1),b=[i];function O(e,t,r,s,i,O){return Object(c["B"])(),Object(c["g"])("nav",a,[Object(c["h"])("ul",n,[Object(c["h"])("li",{class:Object(c["s"])(["page-item",{disabled:!r.pages.has_pre}])},[Object(c["h"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(c["Y"])((function(e){return O.updatePage(i.tempPage.current_page-1)}),["prevent"]))},l)],2),Object(c["h"])("li",d,[Object(c["W"])(Object(c["h"])("select",{class:"form-select",onChange:t[1]||(t[1]=function(e){return O.updatePage(e.target.value)}),"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.tempPage.current_page=e})},[(Object(c["B"])(!0),Object(c["g"])(c["a"],null,Object(c["H"])(i.tempPage.total_pages,(function(e){return Object(c["B"])(),Object(c["g"])("option",{key:e,value:e},Object(c["M"])(e),9,o)})),128))],544),[[c["Q"],i.tempPage.current_page]])]),Object(c["h"])("li",{class:Object(c["s"])(["page-item",{disabled:!r.pages.has_next}])},[Object(c["h"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[3]||(t[3]=Object(c["Y"])((function(e){return O.updatePage(i.tempPage.current_page+1)}),["prevent"]))},b)],2)])])}var u=r("5530"),p={props:{pages:{type:Object,required:!0}},data:function(){return{tempPage:{}}},methods:{updatePage:function(e){this.$emit("emitPage",e)}},watch:{pages:{immediate:!0,handler:function(){this.tempPage=Object(u["a"])({},this.pages)}}}},m=r("6b0d"),h=r.n(m);const j=h()(p,[["render",O]]);t["a"]=j}}]);
//# sourceMappingURL=chunk-1269df05.4aa99a46.js.map