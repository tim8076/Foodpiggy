(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0abfdd"],{1844:function(t,e,o){"use strict";o.r(e);var c=o("7a23"),a={key:0,class:"page-shop"},s={class:"container"},r={class:"d-flex align-items-end"},n={class:"fw-normal me-2"},l={class:"d-flex align-items-center mb-3"},d={key:0,class:"py-2 px-3 bg-thirdly fs-6 text-white me-3"},i={key:1,class:"py-2 px-3 bg-primary fs-6 text-white me-3"},b=Object(c["h"])("i",{class:"fas fa-star text-thirdly"},null,-1),u={class:"card-text fw-light text-gray-dark"},h=Object(c["h"])("hr",null,null,-1),p={class:"container py-3"},O={class:"mb-3 fw-normal mb-3"},j={class:"row"};function f(t,e,o,f,m,g){var y=Object(c["J"])("BaseCardFood"),v=Object(c["J"])("ModalFood"),M=Object(c["J"])("ModalShop");return g.shopData?(Object(c["B"])(),Object(c["g"])("div",a,[Object(c["h"])("div",{class:"jumbotron bg-cover d-flex justify-content-center align-items-center mb-6",style:Object(c["t"])({backgroundImage:"url(".concat(g.coverImage,")")})},null,4),Object(c["h"])("div",s,[Object(c["h"])("div",r,[Object(c["h"])("h2",n,Object(c["M"])(m.shopName),1),Object(c["h"])("button",{type:"button",class:"text-decoration-underline btn p-0",onClick:e[0]||(e[0]=Object(c["Y"])((function(){return g.openShopModal&&g.openShopModal.apply(g,arguments)}),["prevent"]))}," 店家資訊 ")]),Object(c["h"])("div",l,[g.shopData.is_superior?(Object(c["B"])(),Object(c["g"])("p",d," piggy 特選 ")):Object(c["f"])("",!0),g.shopData.is_new?(Object(c["B"])(),Object(c["g"])("p",i," 新上市 ")):Object(c["f"])("",!0),Object(c["h"])("p",null,[b,Object(c["j"])(" "+Object(c["M"])(g.shopData.shop.star),1)])]),Object(c["h"])("p",u,Object(c["M"])(g.shopData.shop.price)+" "+Object(c["M"])(g.shopData.category)+" , "+Object(c["M"])(g.shopData.subCategory),1)]),h,Object(c["h"])("div",p,[(Object(c["B"])(!0),Object(c["g"])(c["a"],null,Object(c["H"])(g.foodListByCategory,(function(t){return Object(c["B"])(),Object(c["g"])("section",{key:t.category,class:"mb-6"},[Object(c["h"])("h2",O,Object(c["M"])(t.category),1),Object(c["h"])("div",j,[(Object(c["B"])(!0),Object(c["g"])(c["a"],null,Object(c["H"])(t.foods,(function(t){return Object(c["B"])(),Object(c["g"])("div",{class:"col-md-6 col-lg-4",key:t.title},[Object(c["k"])(y,{product:t,onTriggerModal:g.openModal},null,8,["product","onTriggerModal"])])})),128))])])})),128))]),m.foodData?(Object(c["B"])(),Object(c["e"])(v,{key:0,ref:"foodModal","product-data":m.foodData,onSendOrder:g.addOrder},null,8,["product-data","onSendOrder"])):Object(c["f"])("",!0),g.shopData?(Object(c["B"])(),Object(c["e"])(M,{key:1,ref:"shopModal","shop-data":g.shopData},null,8,["shop-data"])):Object(c["f"])("",!0)])):Object(c["f"])("",!0)}var m=o("1da1"),g=o("5530"),y=(o("96cf"),o("4de4"),o("d81d"),o("159b"),o("5502")),v={class:"card card__food flex-row bg-gray mb-3 mb-md-6"},M={class:"text px-3 py-6 p-md-6 flex-grow-1 d-flex flex-column justify-content-between"},w={class:"fs-4"},x={class:"overflow-hidden"},D=["src","alt"];function k(t,e,o,a,s,r){return Object(c["B"])(),Object(c["g"])("div",v,[Object(c["h"])("a",{href:"#",class:"stretched-link",onClick:e[0]||(e[0]=Object(c["Y"])((function(){return r.openModal&&r.openModal.apply(r,arguments)}),["prevent"]))}),Object(c["h"])("div",M,[Object(c["h"])("h3",w,Object(c["M"])(o.product.title),1),Object(c["h"])("p",null,"$ "+Object(c["M"])(o.product.price),1)]),Object(c["h"])("div",x,[Object(c["h"])("img",{class:"image img-cover",src:o.product.imageUrl,alt:o.product.title},null,8,D)])])}var C={props:{product:{type:Object,default:function(){return{}}}},methods:{openModal:function(){this.$emit("triggerModal",this.product)}}},N=o("6b0d"),B=o.n(N);const $=B()(C,[["render",k]]);var F=$,_=(o("a4d3"),o("e01a"),{ref:"modal",class:"modal fade",tabindex:"-1"}),S={class:"modal-dialog modal modal-dialog-centered"},L={class:"modal-content overflow-hidden"},P={class:"position-relative"},T=["src","alt"],J=Object(c["h"])("i",{class:"fas fa-times text-dark fs-3"},null,-1),U=[J],H={class:"modal-body"},I={class:"d-flex justify-content-between"},Y={class:"modal-title mb-3"},R={class:"fs-4"},A={class:"mb-3 text-gray-dark"},E={class:"mb-3"},q={class:"modal-footer py-6"},V={class:"container-fluid"},W={class:"row justify-content-between"},z=Object(c["h"])("p",{class:"mb-3"},"請輸入訂購數量",-1),G={class:"col-md-5"},K={class:"input-group mb-6"},Q=Object(c["h"])("i",{class:"fas fa-minus"},null,-1),X=[Q],Z=Object(c["h"])("i",{class:"fas fa-plus"},null,-1),tt=[Z],et={class:"col-md-5"};function ot(t,e,o,a,s,r){return Object(c["B"])(),Object(c["g"])("div",_,[Object(c["h"])("div",S,[Object(c["h"])("div",L,[Object(c["h"])("div",P,[Object(c["h"])("img",{class:"img-cover w-100",src:r.foodData.imageUrl,alt:r.foodData.title},null,8,T),Object(c["h"])("button",{type:"button",class:"btn p-2 position-absolute top-2 end-2 bg-white rounded-circle lh-1",onClick:e[0]||(e[0]=function(){return t.hideModal&&t.hideModal.apply(t,arguments)})},U)]),Object(c["h"])("div",H,[Object(c["h"])("div",I,[Object(c["h"])("h3",Y,Object(c["M"])(r.foodData.title),1),Object(c["h"])("p",R,"$"+Object(c["M"])(r.foodData.price)+" / "+Object(c["M"])(r.foodData.unit),1)]),Object(c["h"])("p",A,Object(c["M"])(r.foodData.content),1),Object(c["h"])("p",E,Object(c["M"])(r.foodData.description),1)]),Object(c["h"])("div",q,[Object(c["h"])("div",V,[Object(c["h"])("div",W,[z,Object(c["h"])("div",G,[Object(c["h"])("div",K,[Object(c["h"])("div",{class:Object(c["s"])({"cursor-not-allowed":s.orderNum<=1})},[Object(c["h"])("button",{class:Object(c["s"])(["btn btn-secondary text-gray-dark",{disabled:s.orderNum<=1}]),type:"button",onClick:e[1]||(e[1]=Object(c["Y"])((function(t){return r.setOrderNum(-1)}),["prevent"]))},X,2)],2),Object(c["W"])(Object(c["h"])("input",{type:"number",min:"1",class:"form-control text-center",onChange:e[2]||(e[2]=function(t){return r.setOrderNum(s.orderNum)}),"onUpdate:modelValue":e[3]||(e[3]=function(t){return s.orderNum=t})},null,544),[[c["R"],s.orderNum,void 0,{number:!0}]]),Object(c["h"])("button",{class:"btn btn-secondary text-gray-dark",type:"button",onClick:e[4]||(e[4]=Object(c["Y"])((function(t){return r.setOrderNum(1)}),["prevent"]))},tt)])]),Object(c["h"])("div",et,[Object(c["h"])("button",{type:"button",class:"btn btn-primary w-100 w-md-auto d-block ms-auto",onClick:e[5]||(e[5]=function(){return r.comfirmOrder&&r.comfirmOrder.apply(r,arguments)})}," 加入購物車 ")])])])])])])],512)}var ct=o("519a"),at={mixins:[ct["a"]],props:{productData:{type:Object,default:function(){return{}}}},computed:{foodData:{get:function(){return this.productData}}},data:function(){return{modal:{},orderNum:1}},watch:{productData:{immediate:!0,handler:function(){this.orderNum=1}}},methods:{setOrderNum:function(t){if(this.orderNum<1)return this.$_swal("訂購數量小於1","error"),void(this.orderNum=1);this.orderNum+=t},comfirmOrder:function(){this.orderNum<1?this.$_swal("訂購數量小於1","error"):this.$emit("sendOrder",{productId:this.foodData.id,qty:this.orderNum})}}};const st=B()(at,[["render",ot]]);var rt=st,nt=(o("b0c0"),{ref:"modal",class:"modal modal__shop fade",tabindex:"-1"}),lt={class:"modal-dialog modal-lg"},dt={class:"modal-content overflow-hidden"},it={class:"position-relative"},bt=["src","alt"],ut=Object(c["h"])("i",{class:"fas fa-times text-dark fs-3"},null,-1),ht=[ut],pt={class:"modal-body"},Ot={class:"p-5 w-md-80 mx-auto bg-white shadow text-center mb-6"},jt={class:"d-flex justify-content-center align-items-center mb-3"},ft={class:"me-3 fw-normal"},mt=Object(c["h"])("i",{class:"fas fa-star text-thirdly"},null,-1),gt={class:"d-flex fs-6 justify-content-center mb-3"},yt={class:"me-2"},vt={class:"me-2"},Mt={class:"border-bottom pb-2 w-md-80 mx-auto"},wt={class:"w-md-80 mx-auto"},xt={class:"d-flex justify-content-between align-items-center"},Dt={class:"fw-normal"},kt={class:"fs-6"},Ct=Object(c["h"])("i",{class:"fas fa-star text-thirdly"},null,-1),Nt={class:"text-gray-dark mb-3"};function Bt(t,e,o,a,s,r){return Object(c["B"])(),Object(c["g"])("div",nt,[Object(c["h"])("div",lt,[Object(c["h"])("div",dt,[Object(c["h"])("div",it,[Object(c["h"])("img",{class:"modal-image w-100 img-cover",src:r.shop.imageUrl,alt:o.shopData.title},null,8,bt),Object(c["h"])("button",{type:"button",class:"btn p-2 position-absolute top-2 end-2 bg-white rounded-circle lh-1",onClick:e[0]||(e[0]=function(){return t.hideModal&&t.hideModal.apply(t,arguments)})},ht)]),Object(c["h"])("div",pt,[Object(c["h"])("div",Ot,[Object(c["h"])("div",jt,[Object(c["h"])("h3",ft,Object(c["M"])(r.shop.title),1),Object(c["h"])("p",null,[mt,Object(c["j"])(" "+Object(c["M"])(r.shop.star),1)])]),Object(c["h"])("div",gt,[Object(c["h"])("p",yt,Object(c["M"])(r.shop.price),1),Object(c["h"])("p",vt,Object(c["M"])(o.shopData.category),1),Object(c["h"])("p",null,Object(c["M"])(o.shopData.subCategory),1)]),Object(c["h"])("p",null,"營業時間: "+Object(c["M"])(r.openTime),1)]),Object(c["h"])("h4",Mt,Object(c["M"])(r.shop.comments.length)+" 則評論",1),Object(c["h"])("ul",wt,[(Object(c["B"])(!0),Object(c["g"])(c["a"],null,Object(c["H"])(r.shop.comments,(function(t){return Object(c["B"])(),Object(c["g"])("li",{key:t.name,class:"py-6 border-bottom"},[Object(c["h"])("div",xt,[Object(c["h"])("h5",Dt,Object(c["M"])(t.name),1),Object(c["h"])("p",kt,[Ct,Object(c["j"])(" "+Object(c["M"])(t.star)+" / 5 ",1)])]),Object(c["h"])("p",Nt,Object(c["M"])(t.date),1),Object(c["h"])("p",null,Object(c["M"])(t.comment),1)])})),128))])])])])],512)}o("99af");var $t={mixins:[ct["a"]],props:{shopData:{type:Object,default:function(){return{}}}},data:function(){return{modal:{}}},computed:{shop:function(){return this.shopData.shop},openTime:function(){var t=this.shopData.shop.businessHours,e=t.open<10?"0".concat(t.open):t.open,o=t.close<10?"0".concat(t.close):t.close;return"上午 ".concat(e,":00 - 下午 ").concat(o,":00")}}};const Ft=B()($t,[["render",Bt]]);var _t=Ft,St={components:{BaseCardFood:F,ModalFood:rt,ModalShop:_t},data:function(){return{shopName:"",foodData:{}}},computed:Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(y["e"])("frontProducts",["allProducts"])),Object(y["e"])("frontCart",["closeModal"])),{},{shopFoodList:function(){var t=this;return this.allProducts.filter((function(e){return e.shop.title===t.shopName}))},shopData:function(){return this.shopFoodList[0]},coverImage:function(){var t;return null===(t=this.shopData)||void 0===t?void 0:t.shop.imageUrl},subCategory:function(){var t=this.shopFoodList.map((function(t){return t.subCategory}));return t.filter((function(t,e,o){return o.indexOf(t)===e}))},foodListByCategory:function(){var t=this,e=[];return this.subCategory.forEach((function(o){var c=[];t.shopFoodList.forEach((function(t){t.subCategory===o&&c.push(t)})),e.push({category:o,foods:c})})),e}}),watch:{closeModal:function(){this.closeModal&&this.$refs.foodModal.hideModal()}},methods:Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(y["b"])("frontProducts",["getAllProducts"])),Object(y["b"])("frontCart",["addToCart"])),{},{openModal:function(t){this.foodData=Object(g["a"])({},t),this.$refs.foodModal.showModal()},addOrder:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,e.addToCart(t);case 2:e.$refs.foodModal.hideModal();case 3:case"end":return o.stop()}}),o)})))()},openShopModal:function(){this.$refs.shopModal.showModal()}}),created:function(){this.shopName=this.$route.params.shop,this.getAllProducts()}};const Lt=B()(St,[["render",f]]);e["default"]=Lt}}]);
//# sourceMappingURL=chunk-2d0abfdd.e23f3886.js.map